{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\amizh\\\\Downloads\\\\dataqualityai\\\\frontend\\\\src\\\\components\\\\Recommendations.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Wrench, CheckCircle, ChevronDown, ChevronUp, Loader2 } from 'lucide-react';\nimport { getFixSuggestions } from '../services/api';\nimport '../styles/Dashboard.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Recommendations = ({\n  items\n}) => {\n  _s();\n  // State to track which item is currently expanded\n  const [expandedIndex, setExpandedIndex] = useState(null);\n  // State to cache the AI answers so we don't re-fetch unnecessarily\n  const [solutions, setSolutions] = useState({});\n  // State to show loading spinner for a specific button\n  const [loadingIndex, setLoadingIndex] = useState(null);\n  const list = items && items.length > 0 ? items : [\"Standardize date format to ISO-8601\", \"Impute missing Merchant IDs\", \"Validate transaction amounts\"];\n  const handleToggleFix = async (index, issueText) => {\n    // 1. If clicking the already open item, close it.\n    if (expandedIndex === index) {\n      setExpandedIndex(null);\n      return;\n    }\n\n    // 2. If we already fetched the solution for this index, just open it.\n    if (solutions[index]) {\n      setExpandedIndex(index);\n      return;\n    }\n\n    // 3. Otherwise, fetch from API\n    setLoadingIndex(index);\n    const aiResponse = await getFixSuggestions(issueText);\n\n    // Save the response\n    setSolutions(prev => ({\n      ...prev,\n      [index]: aiResponse\n    }));\n    setLoadingIndex(null);\n    setExpandedIndex(index);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card recommendations-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-header\",\n      children: [/*#__PURE__*/_jsxDEV(Wrench, {\n        size: 24,\n        color: \"#ffc400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Suggested fixes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rec-list\",\n      children: list.map((item, index) => {\n        const isOpen = expandedIndex === index;\n        const isLoading = loadingIndex === index;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `rec-wrapper ${isOpen ? 'open' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rec-item\",\n            children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n              size: 18,\n              className: \"rec-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"rec-text\",\n              children: item\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `fix-btn ${isOpen ? 'active' : ''}`,\n              onClick: () => handleToggleFix(index, item),\n              disabled: isLoading,\n              children: isLoading ? /*#__PURE__*/_jsxDEV(Loader2, {\n                size: 14,\n                className: \"spinner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 21\n              }, this) : isOpen ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [\"Close \", /*#__PURE__*/_jsxDEV(ChevronUp, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 70,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [\"Apply Fix \", /*#__PURE__*/_jsxDEV(ChevronDown, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 72,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this), isOpen && solutions[index] && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fix-dropdown\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"fix-content-header\",\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"AI Implementation Guide:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"fix-content-body\",\n              children: solutions[index].split('\\n').map((line, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n                children: line\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(Recommendations, \"+D7qXYeJAD2NcHSJfpJbbekEfVA=\");\n_c = Recommendations;\nexport default Recommendations;\nvar _c;\n$RefreshReg$(_c, \"Recommendations\");","map":{"version":3,"names":["React","useState","Wrench","CheckCircle","ChevronDown","ChevronUp","Loader2","getFixSuggestions","jsxDEV","_jsxDEV","Fragment","_Fragment","Recommendations","items","_s","expandedIndex","setExpandedIndex","solutions","setSolutions","loadingIndex","setLoadingIndex","list","length","handleToggleFix","index","issueText","aiResponse","prev","className","children","size","color","fileName","_jsxFileName","lineNumber","columnNumber","map","item","isOpen","isLoading","onClick","disabled","split","line","i","_c","$RefreshReg$"],"sources":["C:/Users/amizh/Downloads/dataqualityai/frontend/src/components/Recommendations.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Wrench, CheckCircle, ChevronDown, ChevronUp, Loader2 } from 'lucide-react';\r\nimport { getFixSuggestions } from '../services/api';\r\nimport '../styles/Dashboard.css';\r\n\r\nconst Recommendations = ({ items }) => {\r\n  // State to track which item is currently expanded\r\n  const [expandedIndex, setExpandedIndex] = useState(null);\r\n  // State to cache the AI answers so we don't re-fetch unnecessarily\r\n  const [solutions, setSolutions] = useState({});\r\n  // State to show loading spinner for a specific button\r\n  const [loadingIndex, setLoadingIndex] = useState(null);\r\n\r\n  const list = items && items.length > 0 ? items : [\r\n    \"Standardize date format to ISO-8601\",\r\n    \"Impute missing Merchant IDs\",\r\n    \"Validate transaction amounts\"\r\n  ];\r\n\r\n  const handleToggleFix = async (index, issueText) => {\r\n    // 1. If clicking the already open item, close it.\r\n    if (expandedIndex === index) {\r\n      setExpandedIndex(null);\r\n      return;\r\n    }\r\n\r\n    // 2. If we already fetched the solution for this index, just open it.\r\n    if (solutions[index]) {\r\n      setExpandedIndex(index);\r\n      return;\r\n    }\r\n\r\n    // 3. Otherwise, fetch from API\r\n    setLoadingIndex(index);\r\n    const aiResponse = await getFixSuggestions(issueText);\r\n    \r\n    // Save the response\r\n    setSolutions(prev => ({ ...prev, [index]: aiResponse }));\r\n    setLoadingIndex(null);\r\n    setExpandedIndex(index);\r\n  };\r\n\r\n  return (\r\n    <div className=\"card recommendations-card\">\r\n      <div className=\"card-header\">\r\n        <Wrench size={24} color=\"#ffc400\" />\r\n        <h3>Suggested fixes</h3>\r\n      </div>\r\n      \r\n      <div className=\"rec-list\">\r\n        {list.map((item, index) => {\r\n          const isOpen = expandedIndex === index;\r\n          const isLoading = loadingIndex === index;\r\n\r\n          return (\r\n            <div key={index} className={`rec-wrapper ${isOpen ? 'open' : ''}`}>\r\n              {/* The Main Row */}\r\n              <div className=\"rec-item\">\r\n                <CheckCircle size={18} className=\"rec-icon\" />\r\n                <span className=\"rec-text\">{item}</span>\r\n                \r\n                <button \r\n                  className={`fix-btn ${isOpen ? 'active' : ''}`} \r\n                  onClick={() => handleToggleFix(index, item)}\r\n                  disabled={isLoading}\r\n                >\r\n                  {isLoading ? (\r\n                    <Loader2 size={14} className=\"spinner\" /> \r\n                  ) : isOpen ? (\r\n                    <>Close <ChevronUp size={14}/></>\r\n                  ) : (\r\n                    <>Apply Fix <ChevronDown size={14}/></>\r\n                  )}\r\n                </button>\r\n              </div>\r\n\r\n              {/* The \"Underneath\" Content Area */}\r\n              {isOpen && solutions[index] && (\r\n                <div className=\"fix-dropdown\">\r\n                  <div className=\"fix-content-header\">\r\n                    <strong>AI Implementation Guide:</strong>\r\n                  </div>\r\n                  <div className=\"fix-content-body\">\r\n                    {/* Convert newlines to breaks for clean formatting */}\r\n                    {solutions[index].split('\\n').map((line, i) => (\r\n                      <p key={i}>{line}</p>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Recommendations;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}